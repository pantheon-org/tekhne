{
  "$schema": "http://json-schema.org/draft-07/schema#",
  "$id": "https://deadalus.local/schemas/readme.schema.json",
  "title": "README Document",
  "description": "Schema for validating README files in implementation plan directories",
  "type": "object",
  "required": ["title", "description", "contents"],
  "additionalProperties": false,
  "properties": {
    "$schema": {
      "type": "string"
    },
    "title": {
      "type": "string",
      "minLength": 1,
      "description": "Title from the README heading"
    },
    "phase": {
      "type": "string",
      "pattern": "^phase-[0-9]+(\\.[0-9]+)*(-[a-z0-9-]+)?$",
      "description": "Phase identifier if this is a phase README"
    },
    "description": {
      "type": "string",
      "minLength": 10,
      "description": "Brief description of what this directory contains"
    },
    "objectives": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "List of objectives for this phase/group",
      "default": []
    },
    "contents": {
      "type": "array",
      "minItems": 1,
      "items": {
        "type": "object",
        "required": ["name", "path"],
        "properties": {
          "name": {
            "type": "string",
            "description": "Display name of the item"
          },
          "path": {
            "type": "string",
            "description": "Relative path to the item"
          },
          "description": {
            "type": "string",
            "description": "Brief description of the item"
          },
          "type": {
            "type": "string",
            "enum": ["step", "activity", "directory", "file"],
            "description": "Type of the item"
          }
        }
      },
      "description": "Table of contents linking to child items"
    },
    "successCriteria": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "description": "Success criteria for this phase/group",
      "default": []
    },
    "rollbackProcedure": {
      "type": "string",
      "description": "Rollback procedure for this phase"
    },
    "tags": {
      "type": "array",
      "items": {
        "type": "string"
      },
      "default": []
    }
  }
}
